<html>
    <head>
        <title>Configuration Files</title>
    </head>
    <body>
        <h1>Configuration Files</h1>
        <p>
            Configuration files contain information that identify a module
            and optionally contain a set of saved module settings.  Configuration
            files look like Tcl scripts, however normally they only need to contain
            <b>set</b> commands.
        </p>
        <h2>Identifying the module</h2>
        <p>
            Each module must be unambiguously identified and addressed.  This identification
            allows the control panel to form a physical connection to the module and to title
            each control panel with a humanly meaningful module name.  The variables you can set
            that control this are:
            <ul>
                <li><b>Name</b> Set this to a unique name that will be used internally to keep
                    track of which module is which as well as to title the control panel associated
                    with that module.
                </li>
                <li><b>ModuleBase</b> Set this to the base address of the module in the VME crate.
                    you can use 0x notation to specify a hexadecimal number (e.g. 0x01234abcd).
                </li>
                <li><b>Crate</b> set this to the number of the VME crate in which you have stuffed
                    the module.  If you do not define this, the crate number defaults to zero.
            </ul>
        </p>
        <h2>Module settings</h2>
        <p>
            Each module configuration file may contain a partial or complete set of device settings.
            These device settings are also specified via Tcl set commands.  The variables you can set are:
            <ul>
                <li><b>Thresholds(i)</b>  The threshold for channel <em>i</em>.</li>
                <li><b>WidthLow</b> The width shared by the lower 8 channels of the module.</li>
                <li><b>WidthHigh</b> The width shared by the upper 8 channels of the module.</li>
                <li><b>DeadTimeLow</b> The deadtime shared by the lower 8 channels of the module</li>
                <li><b>DeadTimeHigh</b> The deadtime shared by the upper 8 channels of the module</li>
                <li><b>Majority</b> The majority threshold.</li>
                <li><b>mask_arr(i)</b> The mask value for channel <em>i</em>.  If an element is a 1 the
                       channel is enabled</li>
            </ul>
        </p>
        <p>
            Note that:
            <ol>
                <li>If you generate one of these by hand you can omit any of these</li>
                <li>Normally the settings get generated by the <a href="write.html">File->Write</a> command.</li>
            </ol>
    <h2>Example config file:</h2>
    <pre>
# CFD configuration file written Fri Dec 05 12:23:05 EST 2003
set Name "RPI_Cfd"
set ModuleBase 0xc20000
set Crate      0
set Thresholds(0) -20
set Thresholds(1) -20
set Thresholds(2) -20
set Thresholds(3) -20
set Thresholds(4) -20
set Thresholds(5) -255
set Thresholds(6) -255
set Thresholds(7) -255
set Thresholds(8) -20
set Thresholds(9) -20
set Thresholds(10) -20
set Thresholds(11) -20
set Thresholds(12) -255
set Thresholds(13) -255
set Thresholds(14) -255
set Thresholds(15) -255
set WidthLow  128
set WidthHigh 158
set DeadTimeLow  200
set DeadTimeHigh 200
set Majority  2
set mask_arr(0) 1
set mask_arr(1) 1
set mask_arr(2) 1
set mask_arr(3) 1
set mask_arr(4) 1
set mask_arr(5) 1
set mask_arr(6) 1
set mask_arr(7) 1
set mask_arr(8) 1
set mask_arr(9) 1
set mask_arr(10) 1
set mask_arr(11) 1
set mask_arr(12) 1
set mask_arr(13) 1
set mask_arr(14) 1
set mask_arr(15) 1
    </pre>
    <br />
    <a href="overview.html">Overview</a>
    <hr />
    <p>Please report all errors to http://daqbugs.nscl.msu.edu </p>>
    </body>
</html>
